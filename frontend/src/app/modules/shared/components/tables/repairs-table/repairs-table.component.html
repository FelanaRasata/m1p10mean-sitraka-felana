<!-- Page Heading -->
<h1 class="h3 mb-2 text-gray-800">{{title}}</h1>

<!-- DataTales Example -->
<div class="table-responsive">
    <table class="table table-bordered" id="dataTable">
        <thead>
        <tr>
            <th>Car Number</th>
            <th>Car Dropped Off</th>
            <th>Car Taken Back</th>
            <th>Price</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tfoot>
        <tr>
            <th>Car Number</th>
            <th>Car Dropped Off</th>
            <th>Car Taken Back</th>
            <th>Price</th>
            <th>Actions</th>
        </tr>
        </tfoot>
        <tbody>
        <tr *ngFor="let repair of repairService.repairs.value">
            <td>{{repair.car.carNumber }}</td>
            <td>{{repair.carDroppedOffAt | date:"d MMM. y"}}</td>
            <td>{{(repair.carTakenBackAt | date:"d MMM. y") || 'N/A'}}</td>
            <td>{{repair.price}}</td>
            <td>
                <a *ngIf="cardUrlPath && repair.car_diagnosis && !repair.initiatedAt && sessionService.onlineUser.value?.type == customer && repair.initiatedAt"
                   [routerLink]="[cardUrlPath.replace(':id', repair._id)]"
                   class="btn btn-sm btn-primary btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-eye"></i>
                    </span>
                    <span class="text">Diagnosis</span>
                </a>
                <a *ngIf="cardUrlPath && !repair.car_diagnosis && !repair.initiatedAt"
                   [routerLink]="[cardUrlPath.replace(':id', repair._id)]"
                   class="btn btn-sm btn-primary btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-eye"></i>
                    </span>
                    <span class="text">Start Diagnosis</span>
                </a>
                <a *ngIf="cardUrlPath && repair.initiatedAt && !repair.inProgressAt && sessionService.onlineUser.value?.type == financial"
                   [routerLink]="[cardUrlPath.replace(':repair_id', repair._id)]"
                   class="btn btn-sm btn-success btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-check"></i>
                    </span>
                    <span class="text">Validate Purchase</span>
                </a>
                <a *ngIf="cardUrlPath && sessionService.onlineUser.value?.type != financial && repair.initiatedAt"
                   [routerLink]="[cardUrlPath.replace(':id', repair._id)]"
                   class="btn btn-sm btn-success btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-check"></i>
                    </span>
                    <span class="text">Card</span>
                </a>
            </td>
        </tr>
        </tbody>
    </table>

    <app-paginator
        [length]="paginationService.paginationData.value.totalItems"
        [pageSize]="paginationService.paginationData.value.limit"
        [pageIndex]="paginationService.paginationData.value.page - 1"
        (page)="setPage($event)"
    ></app-paginator>

</div>

